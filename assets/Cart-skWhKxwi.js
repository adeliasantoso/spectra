import{j as e}from"./ui-Ch8TnjMN.js";import{r as l,L as o}from"./vendor-DhIsQial.js";import{N as b,F as g}from"./Footer-CuKq51hs.js";import{u as S,a as F}from"./index-DA3H-Tmo.js";const M=()=>{const{cartItems:m,updateQuantity:f,removeFromCart:d,getTotalPrice:i,clearCart:j}=S(),{success:L,info:x,warning:h}=F(),[v,p]=l.useState(new Set),[n,N]=l.useState(new Set),c=l.useRef({});l.useEffect(()=>{const t={threshold:.2,rootMargin:"-50px 0px"},s=new IntersectionObserver(a=>{a.forEach(r=>{r.isIntersecting&&N(C=>new Set(C).add(r.target.id))})},t);return Object.values(c.current).forEach(a=>{a&&s.observe(a)}),()=>s.disconnect()},[]);const u=(t,s)=>{s<=0?(d(t),x("Removed")):(f(t,s),x("Updated"))},w=(t,s)=>{p(a=>new Set(a).add(t)),setTimeout(()=>{d(t),h("Removed"),p(a=>{const r=new Set(a);return r.delete(t),r})},300)},k=()=>{j(),h("Cart cleared")},y=t=>{if(!t&&t!==0)return"0.00";try{if(typeof t=="number")return t.toFixed(2);const a=String(t).replace(/[£$,\s]/g,""),r=parseFloat(a);return isNaN(r)?"0.00":r.toFixed(2)}catch(s){return console.error("formatPrice error:",s,"price:",t),"0.00"}};return m.length===0?e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(b,{}),e.jsx("section",{id:"empty-cart",ref:t=>c.current["empty-cart"]=t,className:"pt-24 md:pt-32 pb-12 md:pb-20",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 md:px-8 lg:px-12 text-center",children:[e.jsx("h1",{className:`text-2xl md:text-4xl font-light text-black mb-6 md:mb-8 transform transition-all duration-1000 ease-out ${n.has("empty-cart")?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,style:{transitionDelay:"200ms"},children:"Your Cart"}),e.jsxs("div",{className:`py-8 md:py-16 transition-all duration-700 delay-200 ${n.has("empty-cart")?"animate-fade-up opacity-100":"opacity-0 translate-y-8"}`,children:[e.jsx("svg",{className:"w-16 h-16 md:w-24 md:h-24 mx-auto mb-4 md:mb-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m1.6 8L5 3H3m4 10v6a1 1 0 001 1h10a1 1 0 001-1v-6m-8 6V9a1 1 0 011-1h6a1 1 0 011 1v8"})}),e.jsx("h2",{className:"text-lg md:text-xl font-light text-gray-600 mb-3 md:mb-4",children:"Your cart is empty"}),e.jsx("p",{className:"text-sm md:text-base text-gray-500 mb-6 md:mb-8",children:"Add some products to get started"}),e.jsx(o,{to:"/shop",className:"inline-block bg-black text-white px-6 md:px-8 py-2.5 md:py-3 font-medium hover:bg-gray-800 transition-colors duration-200 rounded-lg text-base",children:"Continue Shopping"})]})]})}),e.jsx(g,{})]}):e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(b,{}),e.jsx("section",{id:"cart-main",ref:t=>c.current["cart-main"]=t,className:"pt-24 md:pt-32 pb-12 md:pb-20",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 md:px-8 lg:px-12",children:[e.jsx("h1",{className:`text-2xl md:text-4xl font-light text-black mb-8 md:mb-12 text-center transform transition-all duration-1000 ease-out ${n.has("cart-main")?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,style:{transitionDelay:"200ms"},children:"Your Cart"}),e.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-3 gap-8 md:gap-12 transition-all duration-700 delay-200 ${n.has("cart-main")?"animate-fade-up opacity-100":"opacity-0 translate-y-8"}`,children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"space-y-4 md:space-y-6",children:m.map((t,s)=>e.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4 border-b border-gray-200 pb-4 md:pb-6 transition-all duration-700 ${v.has(t.id)?"opacity-0 transform translate-x-full scale-95":n.has("cart-main")?"opacity-100 transform translate-x-0 scale-100 animate-fade-up":"opacity-0 translate-y-8"}`,style:{animationDelay:n.has("cart-main")?`${400+s*100}ms`:"0ms"},children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 flex-shrink-0 mx-auto sm:mx-0",children:e.jsx("img",{src:t.images?t.images[0]:t.image,alt:t.name,className:"w-full h-full object-cover rounded-2xl"})}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsx("h3",{className:"text-base md:text-lg font-medium text-black mb-1",children:t.name}),e.jsxs("p",{className:"text-sm md:text-base text-gray-600",children:["£",y(t.price)]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("button",{onClick:()=>u(t.id,t.quantity-1),className:"w-8 h-8 border border-gray-300 rounded flex items-center justify-center text-gray-600 hover:bg-gray-100 hover:scale-105 active:scale-95 transition-all duration-150 text-sm",children:"−"}),e.jsx("span",{className:"w-8 text-center font-medium text-base transition-all duration-200",children:t.quantity}),e.jsx("button",{onClick:()=>u(t.id,t.quantity+1),className:"w-8 h-8 border border-gray-300 rounded flex items-center justify-center text-gray-600 hover:bg-gray-100 hover:scale-105 active:scale-95 transition-all duration-150 text-sm",children:"+"})]}),e.jsx("div",{className:"text-center sm:text-right",children:e.jsxs("p",{className:"text-base md:text-lg font-semibold text-black",children:["£",(parseFloat(y(t.price))*t.quantity).toFixed(2)]})})]}),e.jsx("button",{onClick:()=>w(t.id,t.name),className:"text-gray-400 hover:text-red-500 hover:scale-110 active:scale-95 transition-all duration-200 self-center sm:self-start p-1 rounded-full hover:bg-red-50",title:"Remove item",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t.id))}),e.jsx("div",{className:"mt-6 md:mt-8 text-center sm:text-left",children:e.jsx("button",{onClick:k,className:"text-gray-600 hover:text-red-500 transition-colors text-sm md:text-base",children:"Clear all items"})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 md:p-6 lg:sticky lg:top-24",children:[e.jsx("h3",{className:"text-lg md:text-xl font-medium text-black mb-4 md:mb-6",children:"Order Summary"}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm md:text-base",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["£",i().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm md:text-base",children:[e.jsx("span",{className:"text-gray-600",children:"Shipping"}),e.jsx("span",{className:"font-medium text-green-600",children:"Free"})]}),e.jsxs("div",{className:"flex justify-between text-sm md:text-base",children:[e.jsx("span",{className:"text-gray-600",children:"Tax (20%)"}),e.jsxs("span",{className:"font-medium",children:["£",(i()*.2).toFixed(2)]})]}),e.jsx("hr",{className:"my-3 md:my-4"}),e.jsxs("div",{className:"flex justify-between text-lg md:text-xl font-medium",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["£",(i()*1.2).toFixed(2)]})]})]}),e.jsx(o,{to:"/checkout",className:"block w-full bg-black text-white px-4 md:px-6 py-3 md:py-4 font-medium mt-4 md:mt-6 hover:bg-gray-800 transition-colors duration-200 rounded-lg text-sm md:text-base text-center",children:"Proceed to Checkout"}),e.jsx(o,{to:"/shop",className:"block text-center text-gray-600 hover:text-black transition-colors mt-3 md:mt-4 text-sm md:text-base",children:"Continue Shopping"})]})})]})]})}),e.jsx(g,{})]})};export{M as default};
