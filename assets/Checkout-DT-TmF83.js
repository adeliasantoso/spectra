import{j as e}from"./ui-Ch8TnjMN.js";import{e as B,r as c,L as D,R}from"./vendor-DhIsQial.js";import{N as T,F as U}from"./Footer-CuKq51hs.js";import{u as K,a as z}from"./index-DA3H-Tmo.js";const Q=()=>{const g=B(),{cartItems:o,getTotalPrice:m,clearCart:P}=K(),{success:A,error:h,info:y}=z(),[s,x]=c.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",country:"United Kingdom",cardNumber:"",expiryMonth:"",expiryYear:"",cvv:"",cardName:"",sameAsShipping:!0,billingAddress:"",billingCity:"",billingPostalCode:"",billingCountry:"United Kingdom"}),[t,j]=c.useState({}),[N,v]=c.useState(!1),[d,C]=c.useState(1),[k,F]=c.useState(new Set),w=c.useRef({});c.useEffect(()=>{o.length===0&&g("/cart")},[o,g]),c.useEffect(()=>{const r={threshold:.2,rootMargin:"-50px 0px"},a=new IntersectionObserver(i=>{i.forEach(p=>{p.isIntersecting&&F(f=>new Set(f).add(p.target.id))})},r);return Object.values(w.current).forEach(i=>{i&&a.observe(i)}),()=>a.disconnect()},[]);const l=r=>{const{name:a,value:i,type:p,checked:f}=r.target;if(p==="checkbox")x(n=>({...n,[a]:f}));else if(a==="cardNumber"){const n=i.replace(/\s/g,""),u=n.replace(/(.{4})/g,"$1 ").trim();n.length<=16&&x(Y=>({...Y,[a]:u}))}else if(a==="phone"){const n=i.replace(/\D/g,"");n.length<=11&&x(u=>({...u,[a]:n}))}else if(a==="postalCode"||a==="billingPostalCode"){const n=i.toUpperCase();n.length<=8&&x(u=>({...u,[a]:n}))}else x(n=>({...n,[a]:i}));t[a]&&j(n=>({...n,[a]:""}))},S=r=>{const a={};if(r===1)s.firstName.trim()||(a.firstName="First name is required"),s.lastName.trim()||(a.lastName="Last name is required"),s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(a.email="Email is invalid"):a.email="Email is required",s.phone.trim()||(a.phone="Phone number is required"),s.address.trim()||(a.address="Address is required"),s.city.trim()||(a.city="City is required"),s.postalCode.trim()||(a.postalCode="Postal code is required");else if(r===2){const i=s.cardNumber.replace(/\s/g,"");i?i.length!==16&&(a.cardNumber="Card number must be 16 digits"):a.cardNumber="Card number is required",s.expiryMonth||(a.expiryMonth="Expiry month is required"),s.expiryYear||(a.expiryYear="Expiry year is required"),s.cvv?s.cvv.length<3&&(a.cvv="CVV must be at least 3 digits"):a.cvv="CVV is required",s.cardName.trim()||(a.cardName="Cardholder name is required"),s.sameAsShipping||(s.billingAddress.trim()||(a.billingAddress="Billing address is required"),s.billingCity.trim()||(a.billingCity="Billing city is required"),s.billingPostalCode.trim()||(a.billingPostalCode="Billing postal code is required"))}return j(a),Object.keys(a).length===0},q=()=>{S(d)?(C(r=>r+1),y("Next step")):h("Fill required fields")},$=()=>{C(r=>r-1)},M=()=>new Promise(r=>{const a=Math.random()*3e3+2e3,i=Math.random()>.1;setTimeout(()=>{r(i)},a)}),I=async()=>{if(!S(2)){h("Fill required fields");return}v(!0),y("Processing payment...");try{if(await M()){const i={orderNumber:`SP${Date.now().toString().slice(-6)}`,items:o,shippingInfo:{firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone,address:s.address,city:s.city,postalCode:s.postalCode,country:s.country},paymentInfo:{cardLast4:s.cardNumber.slice(-4),cardName:s.cardName},totals:{subtotal:m(),tax:m()*.2,total:m()*1.2},orderDate:new Date().toISOString()};localStorage.setItem("lastOrder",JSON.stringify(i)),P(),A("Order confirmed"),setTimeout(()=>{g("/order-success")},1500)}else h("Payment failed")}catch{h("Payment error")}finally{v(!1)}},b=r=>typeof r=="number"?r.toFixed(2):"0.00",E=()=>e.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3].map((r,a)=>e.jsxs(R.Fragment,{children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full border-2 transition-all duration-300 ${r===d?"bg-black text-white border-black":r<d?"bg-green-600 text-white border-green-600":"bg-white text-gray-400 border-gray-300"}`,children:r<d?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("span",{className:"text-sm font-medium",children:r})}),a<2&&e.jsx("div",{className:`w-12 h-0.5 mx-2 transition-all duration-300 ${r<d?"bg-green-600":"bg-gray-300"}`})]},r))}),L=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-medium text-black mb-6",children:"Shipping Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstName",value:s.firstName,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.firstName?"border-red-500":"border-gray-300"}`,placeholder:"John"}),t.firstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastName",value:s.lastName,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.lastName?"border-red-500":"border-gray-300"}`,placeholder:"Doe"}),t.lastName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.lastName})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.email?"border-red-500":"border-gray-300"}`,placeholder:"john.doe@example.com"}),t.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.phone?"border-red-500":"border-gray-300"}`,placeholder:"07123456789"}),t.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.phone})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),e.jsx("input",{type:"text",name:"address",value:s.address,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.address?"border-red-500":"border-gray-300"}`,placeholder:"123 Main Street"}),t.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.address})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),e.jsx("input",{type:"text",name:"city",value:s.city,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.city?"border-red-500":"border-gray-300"}`,placeholder:"London"}),t.city&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code *"}),e.jsx("input",{type:"text",name:"postalCode",value:s.postalCode,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.postalCode?"border-red-500":"border-gray-300"}`,placeholder:"SW1A 1AA"}),t.postalCode&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.postalCode})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country *"}),e.jsxs("select",{name:"country",value:s.country,onChange:l,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all",children:[e.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),e.jsx("option",{value:"Ireland",children:"Ireland"}),e.jsx("option",{value:"France",children:"France"}),e.jsx("option",{value:"Germany",children:"Germany"}),e.jsx("option",{value:"Netherlands",children:"Netherlands"})]})]})]})]}),O=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-medium text-black mb-6",children:"Payment Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number *"}),e.jsx("input",{type:"text",name:"cardNumber",value:s.cardNumber,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.cardNumber?"border-red-500":"border-gray-300"}`,placeholder:"1234 5678 9012 3456",maxLength:"19"}),t.cardNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.cardNumber})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Month *"}),e.jsxs("select",{name:"expiryMonth",value:s.expiryMonth,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.expiryMonth?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Month"}),Array.from({length:12},(r,a)=>e.jsx("option",{value:String(a+1).padStart(2,"0"),children:String(a+1).padStart(2,"0")},a+1))]}),t.expiryMonth&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.expiryMonth})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Year *"}),e.jsxs("select",{name:"expiryYear",value:s.expiryYear,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.expiryYear?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Year"}),Array.from({length:10},(r,a)=>e.jsx("option",{value:2025+a,children:2025+a},a))]}),t.expiryYear&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.expiryYear})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV *"}),e.jsx("input",{type:"text",name:"cvv",value:s.cvv,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.cvv?"border-red-500":"border-gray-300"}`,placeholder:"123",maxLength:"4"}),t.cvv&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.cvv})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cardholder Name *"}),e.jsx("input",{type:"text",name:"cardName",value:s.cardName,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.cardName?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),t.cardName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.cardName})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-lg font-medium text-black mb-4",children:"Billing Address"}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"sameAsShipping",checked:s.sameAsShipping,onChange:l,className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Billing address is the same as shipping address"})]})}),!s.sameAsShipping&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Billing Address *"}),e.jsx("input",{type:"text",name:"billingAddress",value:s.billingAddress,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.billingAddress?"border-red-500":"border-gray-300"}`,placeholder:"123 Billing Street"}),t.billingAddress&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.billingAddress})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),e.jsx("input",{type:"text",name:"billingCity",value:s.billingCity,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.billingCity?"border-red-500":"border-gray-300"}`,placeholder:"London"}),t.billingCity&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.billingCity})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code *"}),e.jsx("input",{type:"text",name:"billingPostalCode",value:s.billingPostalCode,onChange:l,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all ${t.billingPostalCode?"border-red-500":"border-gray-300"}`,placeholder:"SW1A 1AA"}),t.billingPostalCode&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.billingPostalCode})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country *"}),e.jsxs("select",{name:"billingCountry",value:s.billingCountry,onChange:l,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all",children:[e.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),e.jsx("option",{value:"Ireland",children:"Ireland"}),e.jsx("option",{value:"France",children:"France"}),e.jsx("option",{value:"Germany",children:"Germany"}),e.jsx("option",{value:"Netherlands",children:"Netherlands"})]})]})]})]})]})]}),V=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-medium text-black mb-6",children:"Review Your Order"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h4",{className:"font-medium text-black mb-4",children:"Items"}),e.jsx("div",{className:"space-y-4",children:o.map(r=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:r.images?r.images[0]:r.image,alt:r.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-black",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",r.quantity]})]}),e.jsxs("p",{className:"font-medium",children:["£",(parseFloat(b(r.price))*r.quantity).toFixed(2)]})]},r.id))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h4",{className:"font-medium text-black mb-4",children:"Shipping Address"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:[s.firstName," ",s.lastName]}),e.jsx("p",{children:s.address}),e.jsxs("p",{children:[s.city,", ",s.postalCode]}),e.jsx("p",{children:s.country}),e.jsx("p",{className:"mt-2",children:s.email}),e.jsx("p",{children:s.phone})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h4",{className:"font-medium text-black mb-4",children:"Payment Method"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:["Card ending in ",s.cardNumber.slice(-4)]}),e.jsx("p",{children:s.cardName}),e.jsxs("p",{children:["Expires ",s.expiryMonth,"/",s.expiryYear]})]})]})]});return o.length===0?null:e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(T,{}),e.jsx("section",{id:"checkout-main",ref:r=>w.current["checkout-main"]=r,className:"pt-24 md:pt-32 pb-12 md:pb-20",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 md:px-8 lg:px-12",children:[e.jsx("h1",{className:`text-3xl md:text-4xl lg:text-5xl font-light text-black mb-8 md:mb-12 text-center transform transition-all duration-1000 ease-out ${k.has("checkout-main")?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,style:{transitionDelay:"200ms"},children:"Checkout"}),E(),e.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-3 gap-8 md:gap-12 transition-all duration-700 delay-200 ${k.has("checkout-main")?"animate-fade-up opacity-100":"opacity-0 translate-y-8"}`,children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 md:p-8 border border-gray-200",children:[d===1&&L(),d===2&&O(),d===3&&V(),e.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t",children:[e.jsxs("div",{children:[d>1&&e.jsx("button",{onClick:$,className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors",children:"Previous"}),e.jsx(D,{to:"/cart",className:"ml-4 text-gray-600 hover:text-black transition-colors",children:"Back to Cart"})]}),e.jsx("div",{children:d<3?e.jsx("button",{onClick:q,className:"px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Continue"}):e.jsx("button",{onClick:I,disabled:N,className:"px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:N?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Processing..."})]}):e.jsx("span",{children:"Place Order"})})})]})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 lg:sticky lg:top-24",children:[e.jsx("h3",{className:"text-lg md:text-xl font-medium text-black mb-6",children:"Order Summary"}),e.jsx("div",{className:"space-y-4",children:o.map(r=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:r.images?r.images[0]:r.image,alt:r.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-black truncate",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Qty: ",r.quantity]})]}),e.jsxs("p",{className:"text-sm font-medium",children:["£",(parseFloat(b(r.price))*r.quantity).toFixed(2)]})]},r.id))}),e.jsx("hr",{className:"my-6"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["£",b(m())]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Shipping"}),e.jsx("span",{className:"font-medium text-green-600",children:"Free"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Tax (20%)"}),e.jsxs("span",{className:"font-medium",children:["£",(m()*.2).toFixed(2)]})]}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"flex justify-between text-lg font-medium",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["£",(m()*1.2).toFixed(2)]})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx("span",{children:"Secure SSL encrypted payment"})]})})]})})]})]})}),e.jsx(U,{})]})};export{Q as default};
