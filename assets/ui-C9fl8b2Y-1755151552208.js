import{R as P,r as t}from"./vendor-DhIsQial-1755151552208.js";var I={exports:{}},j={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $;function T(){if($)return j;$=1;var o=Symbol.for("react.transitional.element"),h=Symbol.for("react.fragment");function c(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var n in s)n!=="key"&&(a[n]=s[n])}else a=s;return s=a.ref,{$$typeof:o,type:i,key:l,ref:s!==void 0?s:null,props:a}}return j.Fragment=h,j.jsx=c,j.jsxs=c,j}var V;function J(){return V||(V=1,I.exports=T()),I.exports}var e=J();const S=P.memo(({src:o,alt:h,className:c="",width:i,height:s,lazy:a=!0,placeholder:l=!0,priority:n=!1,sizes:g,srcSet:y,webpSrc:u,responsiveSizes:m,...R})=>{const[b,E]=t.useState(!1),[k,v]=t.useState(!1),[w,f]=t.useState(!1),N=t.useRef(null),x=t.useRef(null);t.useEffect(()=>{if(n&&o){const r=document.createElement("link");return r.rel="preload",r.as="image",r.href=o,u&&(r.href=u,r.type="image/webp"),document.head.appendChild(r),()=>{document.head.contains(r)&&document.head.removeChild(r)}}},[n,o,u]),t.useEffect(()=>{if(!a||n){f(!0);return}const r=new IntersectionObserver(([C])=>{C.isIntersecting&&(f(!0),r.disconnect())},{threshold:.1,rootMargin:n?"300px":"100px"});return x.current&&r.observe(x.current),()=>r.disconnect()},[a,n]);const L=t.useCallback(()=>{E(!0)},[]),p=t.useCallback(()=>{v(!0)},[]);return e.jsxs("div",{ref:x,className:"relative overflow-hidden",style:{aspectRatio:i&&s&&c.includes("aspect-")?`${i}/${s}`:void 0,width:"100%",height:"100%"},children:[l&&!b&&w&&!k&&e.jsx("div",{className:`absolute inset-0 bg-gray-200 ${n?"animate-shimmer-fast":"animate-shimmer"}`}),w&&e.jsxs("picture",{children:[u&&e.jsx("source",{srcSet:u,type:"image/webp",sizes:g||m}),e.jsx("img",{ref:N,src:o,alt:h,width:i,height:s,onLoad:L,onError:p,loading:n?"eager":a?"lazy":"eager",decoding:"async",fetchPriority:n?"high":"auto",sizes:g||m||"(max-width: 768px) 100vw, (max-width: 1200px) 80vw, 1200px",srcSet:y,className:`transition-all duration-700 ease-out ${b?"opacity-100 scale-100":"opacity-0 scale-102"} ${c}`,...R})]}),k&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-gray-500 text-xs",children:"Image unavailable"})]})})]})});S.displayName="OptimizedImage";const q=P.memo(({src:o,poster:h,className:c="",width:i,height:s,lazy:a=!0,autoplay:l=!0,muted:n=!0,loop:g=!0,playsInline:y=!0,preload:u="metadata",priority:m=!1,fallbackImage:R,...b})=>{const[E,k]=t.useState(!1),[v,w]=t.useState(!1),[f,N]=t.useState(!1),[x,L]=t.useState(!1),p=t.useRef(null),r=t.useRef(null);t.useEffect(()=>{if(!a||m){N(!0);return}const d=new IntersectionObserver(([_])=>{_.isIntersecting&&(N(!0),d.disconnect())},{threshold:.1,rootMargin:m?"400px":"100px"});return r.current&&d.observe(r.current),()=>d.disconnect()},[a,m]),t.useEffect(()=>{if(p.current&&x&&f&&l){const d=p.current.play();d!==void 0&&d.catch(()=>{})}},[x,f,l]);const C=t.useCallback(()=>{k(!0),L(!0)},[]),M=t.useCallback(d=>{console.warn("Video load error:",o,d.target?.error),w(!0)},[o]),O=t.useCallback(()=>{L(!0)},[]);return e.jsxs("div",{ref:r,className:"relative overflow-hidden",style:{aspectRatio:i&&s?`${i}/${s}`:void 0,width:"100%",height:"100%"},children:[!E&&f&&!v&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 border-4 border-white/20 border-t-white/80 rounded-full animate-spin"})}),f&&!v&&e.jsxs("video",{ref:p,width:i,height:s,autoPlay:l,muted:n,loop:g,playsInline:y,preload:m?"auto":u,poster:h,onLoadedData:C,onCanPlay:O,onError:M,className:`transition-all duration-700 ease-out object-cover ${E?"opacity-100 scale-100":"opacity-0 scale-105"} ${c}`,...b,children:[e.jsx("source",{src:o,type:"video/mp4"}),"Your browser does not support the video tag."]}),v&&e.jsx("div",{className:"absolute inset-0",children:R?e.jsx("img",{src:R,alt:"Video fallback",className:`w-full h-full object-cover ${c}`}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white/60",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),e.jsx("span",{className:"text-xs",children:"Video unavailable"})]})})})]})});q.displayName="OptimizedVideo";export{S as O,e as j};
