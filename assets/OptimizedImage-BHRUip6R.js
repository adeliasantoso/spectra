import{r as s,j as e}from"./index-CQbzxhA-.js";const I=({src:m,alt:f,className:i="",width:t,height:a,lazy:r=!0,...x})=>{const[l,g]=s.useState(!1),[c,h]=s.useState(!1),[d,u]=s.useState(!1),v=s.useRef(null),n=s.useRef(null);s.useEffect(()=>{if(!r){u(!0);return}const o=new IntersectionObserver(([b])=>{b.isIntersecting&&(u(!0),o.disconnect())},{threshold:.1,rootMargin:"50px"});return n.current&&o.observe(n.current),()=>o.disconnect()},[r]);const p=s.useCallback(()=>{g(!0)},[]),j=s.useCallback(()=>{h(!0)},[]);return e.jsxs("div",{ref:n,className:"relative overflow-hidden",style:{aspectRatio:t&&a&&i.includes("aspect-")?`${t}/${a}`:void 0,width:"100%",height:"100%"},children:[!l&&d&&!c&&e.jsx("div",{className:"absolute inset-0 animate-pulse bg-gray-200",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 animate-shimmer"})}),d&&e.jsx("img",{ref:v,src:m,alt:f,width:t,height:a,onLoad:p,onError:j,loading:r?"lazy":"eager",decoding:"async",className:`transition-all duration-500 ease-out ${l?"opacity-100 scale-100":"opacity-0 scale-105"} ${i}`,...x}),c&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-gray-500 text-xs",children:"Image unavailable"})]})})]})};export{I as O};
