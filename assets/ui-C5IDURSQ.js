import{R as $,r as t}from"./vendor-DhIsQial.js";var I={exports:{}},h={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C;function _(){if(C)return h;C=1;var u=Symbol.for("react.transitional.element"),m=Symbol.for("react.fragment");function i(n,s,r){var o=null;if(r!==void 0&&(o=""+r),s.key!==void 0&&(o=""+s.key),"key"in s){r={};for(var a in s)a!=="key"&&(r[a]=s[a])}else r=s;return s=r.ref,{$$typeof:u,type:n,key:o,ref:s!==void 0?s:null,props:r}}return h.Fragment=m,h.jsx=i,h.jsxs=i,h}var V;function T(){return V||(V=1,I.exports=_()),I.exports}var e=T();const J=$.memo(({src:u,alt:m,className:i="",width:n,height:s,lazy:r=!0,placeholder:o=!0,priority:a=!1,sizes:k,srcSet:w,...y})=>{const[d,p]=t.useState(!1),[j,b]=t.useState(!1),[g,f]=t.useState(!1),N=t.useRef(null),l=t.useRef(null);t.useEffect(()=>{if(!r||a){f(!0);return}const x=new IntersectionObserver(([v])=>{v.isIntersecting&&(f(!0),x.disconnect())},{threshold:.1,rootMargin:a?"200px":"50px"});return l.current&&x.observe(l.current),()=>x.disconnect()},[r,a]);const R=t.useCallback(()=>{p(!0)},[]),E=t.useCallback(()=>{b(!0)},[]);return e.jsxs("div",{ref:l,className:"relative overflow-hidden",style:{aspectRatio:n&&s&&i.includes("aspect-")?`${n}/${s}`:void 0,width:"100%",height:"100%"},children:[o&&!d&&g&&!j&&e.jsx("div",{className:"absolute inset-0 animate-pulse bg-gray-200",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 animate-shimmer"})}),g&&e.jsx("img",{ref:N,src:u,alt:m,width:n,height:s,onLoad:R,onError:E,loading:a?"eager":r?"lazy":"eager",decoding:"async",sizes:k,srcSet:w,className:`transition-all duration-500 ease-out ${d?"opacity-100 scale-100":"opacity-0 scale-105"} ${i}`,...y}),j&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-gray-500 text-xs",children:"Image unavailable"})]})})]})});J.displayName="OptimizedImage";const q=$.memo(({src:u,poster:m,className:i="",width:n,height:s,lazy:r=!0,autoplay:o=!0,muted:a=!0,loop:k=!0,playsInline:w=!0,preload:y="metadata",priority:d=!1,fallbackImage:p,...j})=>{const[b,g]=t.useState(!1),[f,N]=t.useState(!1),[l,R]=t.useState(!1),[E,x]=t.useState(!1),v=t.useRef(null),L=t.useRef(null);t.useEffect(()=>{if(!r||d){R(!0);return}const c=new IntersectionObserver(([O])=>{O.isIntersecting&&(R(!0),c.disconnect())},{threshold:.1,rootMargin:d?"400px":"100px"});return L.current&&c.observe(L.current),()=>c.disconnect()},[r,d]),t.useEffect(()=>{if(v.current&&E&&l&&o){const c=v.current.play();c!==void 0&&c.catch(()=>{})}},[E,l,o]);const P=t.useCallback(()=>{g(!0),x(!0)},[]),S=t.useCallback(c=>{console.warn("Video load error:",u,c.target?.error),N(!0)},[u]),M=t.useCallback(()=>{x(!0)},[]);return e.jsxs("div",{ref:L,className:"relative overflow-hidden",style:{aspectRatio:n&&s?`${n}/${s}`:void 0,width:"100%",height:"100%"},children:[!b&&l&&!f&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 border-4 border-white/20 border-t-white/80 rounded-full animate-spin"})}),l&&!f&&e.jsxs("video",{ref:v,width:n,height:s,autoPlay:o,muted:a,loop:k,playsInline:w,preload:d?"auto":y,poster:m,onLoadedData:P,onCanPlay:M,onError:S,className:`transition-all duration-700 ease-out object-cover ${b?"opacity-100 scale-100":"opacity-0 scale-105"} ${i}`,...j,children:[e.jsx("source",{src:u,type:"video/mp4"}),"Your browser does not support the video tag."]}),f&&e.jsx("div",{className:"absolute inset-0",children:p?e.jsx("img",{src:p,alt:"Video fallback",className:`w-full h-full object-cover ${i}`}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white/60",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),e.jsx("span",{className:"text-xs",children:"Video unavailable"})]})})})]})});q.displayName="OptimizedVideo";export{J as O,e as j};
